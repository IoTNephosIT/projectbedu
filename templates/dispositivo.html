<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Sensores</title>
	{% load static %}
    <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.0/css/all.css" crossorigin="anonymous" />
	<link rel="stylesheet" href="{% static 'css/main.css' %}" />
	<script src="https://code.jquery.com/jquery-3.4.0.min.js" integrity="sha256-BJeo0qm959uMBGb65z40ejJYGSgR7REI4+CW1fNKwOg=" crossorigin="anonymous"" type="text/javascript" charset="utf-8"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0/dist/Chart.min.js" type="text/javascript" charset="utf-8"></script>
	<script src="/static/js/jquery.js" type="text/javascript" charset="utf-8"></script>
    <script src="/static/js/jquery.knob.js" type="text/javascript" charset="utf-8"></script>
	
	
</head>
<body>
	

	<nav class="navbar navbar-light bg-light">
		<span class="navbar-brand mb-0 h1">Iot-Innovaciones</span>
		<button type="button" class="btn btn-light" value="Actualizar" onclick="location.reload()">Actualizar</button>
	</nav>

	<div class="container">
	  <div class="row">
	    <div class="col-sm">
	    	<div class="card" style="width: 100%;">
	    	<div class="card-header">
				<li class="list-group-item"><a href="{% url 'sensor_detail'  DeviceId '01' %}">Sensor1</a></li>
			</div>
	    	<ul class="list-group list-group-flush">
				
			  	{% for dato in datos %}
					{% if dato.Sensor == '01' %}
					  	<div class="container">
							<input type="text" value="{{ dato.porcetage }}" id="sensor1" name="sensor1" onload="loadPorcetage(this.value,this)" class="dial">
						</div>
						  <li class="list-group-item"><p>Porcentaje: {{ dato.porcetage }}</p></li>
						  <li class="list-group-item"><p>{{ dato.fecha }}</p></li>
						 
			  		{% endif %}
			    {% endfor %}
			  </ul>
			</div>
	    </div>
	    <div class="col-sm">
			<div class="card" style="width: 100%;">
			  <div class="card-header">
			   	 <li class="list-group-item"><a href="{% url 'sensor_detail'  DeviceId '02' %}">Sensor2</a></li>
			  </div>
			  <ul class="list-group list-group-flush">
			  	{% for dato in datos %}
			  		{% if dato.Sensor == '02' %}
			  		<div class="container">
							<input type="text" value="{{ dato.porcetage }}" id="sensor2" name="sensor2" class="dial">
						</div>
					  <li class="list-group-item"><p>Porcentaje: {{ dato.porcetage }}</p></li>
					  <li class="list-group-item"><p>{{ dato.fecha }}</p></li>
					  
			  		{% endif %}
			    {% endfor %}
			  </ul>
			</div>
	    </div>
	    <div class="col-sm">
	    	<div class="card" style="width: 100%;">
	    	<div class="card-header">
				<li class="list-group-item"><a href="{% url 'sensor_detail'  DeviceId '03' %}">Sensor3</a></li>
			</div>
	    	<ul class="list-group list-group-flush">
			  	{% for dato in datos %}
			  		{% if dato.Sensor == '03' %}
			  		<div class="container">
							<input type="text" value="{{ dato.porcetage }}" id="sensor3" class="dial">
						</div>
					  <li class="list-group-item"><p>Porcentaje: {{ dato.porcetage }}</p></li>
					  <li class="list-group-item"><p>{{ dato.fecha }}</p></li>
					
			  		{% endif %}
			    {% endfor %}
			 </ul>
			</div>
	    </div>
	    
	  </div>
	</div>
	
	<br>
	<div class="container">
		<div class="row">
			<div class="col-sm">
					<div class="card" style="width: 100%;">
					<div class="card-header">
						<li class="list-group-item"><a href="{% url 'sensor_detail'  DeviceId '04' %}">Sensor4</a></li>
					</div>
					<ul class="list-group list-group-flush">
							{% for dato in datos %}
								{% if dato.Sensor == '04' %}
								<div class="container">
									<input type="text" value="{{ dato.porcetage }}" id="sensor4" class="dial">
								</div>
								<li class="list-group-item"><p>Porcentaje: {{ dato.porcetage }}</p></li>
								<li class="list-group-item"><p>{{ dato.fecha }}</p></li>
							
								{% endif %}
						{% endfor %}
					</ul>
					</div>
			</div>
			<div class="col-sm">
					<div class="card" style="width: 100%;">
					<div class="card-header">
						<li class="list-group-item"><a href="{% url 'sensor_detail'  DeviceId '05' %}">Sensor5</a></li>
					</div>
					<ul class="list-group list-group-flush">
						  {% for dato in datos %}
							  {% if dato.Sensor == '05' %}
							  <div class="container">
									<input type="text" value="{{ dato.porcetage }}" id="sensor5" class="dial">
								</div>
							  <li class="list-group-item"><p>Porcentaje: {{ dato.porcetage }}</p></li>
							  <li class="list-group-item"><p>{{ dato.fecha }}</p></li>
							
							  {% endif %}
						{% endfor %}
					  </ul>
					</div>
			</div>
			<div class="col-sm">
					<div class="card" style="width: 100%;">
					  <div class="card-header">
						<li class="list-group-item"><a href="{% url 'sensor_detail'  DeviceId '06' %}">Sensor6</a></li>
					  </div>
					  <ul class="list-group list-group-flush">
						  {% for dato in datos %}
							  {% if dato.Sensor == '06' %}
							  <div class="container">
									<input type="text" value="{{ dato.porcetage }}" id="sensor6" class="dial">
								</div>
							  <li class="list-group-item"><p>Porcentaje: {{ dato.porcetage }}</p></li>
							  <li class="list-group-item"><p>{{ dato.fecha }}</p></li>
							
							  {% endif %}
						{% endfor %}
					  </ul>
					</div>
				</div>
		</div>
	</div>
	<div class="container">
	  <div class="row">
	    
	    
	    <div class="col-sm">
	    	<div class="card" style="width: 100%;">
	    	<div class="card-header">
				<li class="list-group-item"><a href="{% url 'sensor_detail'  DeviceId '07' %}">Sensor7</a></li>
			</div>
	    	<ul class="list-group list-group-flush">
			  	{% for dato in datos %}
			  		{% if dato.Sensor == '07' %}
			  		<div class="container">
							<input type="text" value="{{ dato.porcetage }}" id="sensor7" class="dial">
						</div>
					  <li class="list-group-item"><p>Porcentaje: {{ dato.porcetage }}</p></li>
					  <li class="list-group-item"><p>{{ dato.fecha }}</p></li>
					
			  		{% endif %}
			    {% endfor %}
			 </ul>
			</div>
			
		</div>
		<div class="col-sm">
				<div class="card" style="width: 100%;">
				<div class="card-header">
					<li class="list-group-item"><a href="{% url 'sensor_detail'  DeviceId '08' %}">Sensor8</a></li>
				</div>
				<ul class="list-group list-group-flush">
					  {% for dato in datos %}
						  {% if dato.Sensor == '08' %}
						  <div class="container">
								<input type="text" value="{{ dato.porcetage }}" id="sensor8" class="dial">
							</div>
							
							<li class="list-group-item"><p>Porcentaje: {{ dato.porcetage }}</p></li>
							<li class="list-group-item"><p> {{ dato.fecha }}</p></li>
						  {% endif %}
					{% endfor %}
				 </ul>
		</div>
	  </div>
	</div>

	<br>
	<br>
	<br>
	<div class="card">
		<div class="card-body">
			<blockquote class="blockquote mb-0">
			<p>Iot- Innovaciones 2019</p>
			<footer class="blockquote-footer">Actualizacion de pagina cada 30 seg.<cite title="Source Title">Nephos IT</cite></footer>
			</blockquote>
		</div>
	</div>
</body>
<script>

jQuery(document).ready(function ($) {


	$('.dial').knob({
		'min': 0,
			'max': 100,
			"width":180,
			"heigth":180,
			'step': 1,
			'readOnly': false,
			'linecap': 'round',
			'displayInput': true,
			'displayPrevious': false,
	});

		$('#sensor1').trigger('configure', {
			'draw': function (v) {
				v=parseInt(document.getElementById('sensor1').value);
				if (v < 30 ) {
					this.o.fgColor='#F05C3C';
					$("#sensor1").css("color", "#F05C3C");
				}
			},
			'format': function (v) {return v + ' %';}
		});
	    $('#sensor1').trigger('change');
		$('#sensor2').trigger('configure', {
			'draw': function (v) {
				v=parseInt(document.getElementById('sensor2').value);
				if (v < 30 ) {
					this.o.fgColor='#F05C3C';
					$("#sensor2").css("color", "#F05C3C");
				}
			},
			'format': function (v) {return v + ' %';}
		});
	    $('#sensor2').trigger('change');
		$('#sensor3').trigger('configure', {
			'draw': function (v) {
				v=parseInt(document.getElementById('sensor3').value);
				if (v < 30 ) {
					this.o.fgColor='#F05C3C';
					$("#sensor3").css("color", "#F05C3C");
				}
			},
			'format': function (v) {return v + ' %';}
		});
	    $('#sensor3').trigger('change');
		$('#sensor4').trigger('configure', {
			'draw': function (v) {
				v=parseInt(document.getElementById('sensor4').value);
				if (v < 30 ) {
					this.o.fgColor='#F05C3C';
					$("#sensor4").css("color", "#F05C3C");
				}
			},
			'format': function (v) {return v + ' %';}
		});
	    $('#sensor4').trigger('change');
		$('#sensor5').trigger('configure', {
			'draw': function (v) {
				v=parseInt(document.getElementById('sensor5').value);
				if (v < 30 ) {
					this.o.fgColor='#F05C3C';
					$("#sensor5").css("color", "#F05C3C");
				}
			},
			'format': function (v) {return v + ' %';}
		});
	    $('#sensor5').trigger('change');
		$('#sensor6').trigger('configure', {
			'draw': function (v) {
				v=parseInt(document.getElementById('sensor6').value);
				if (v < 30 ) {
					this.o.fgColor='#F05C3C';
					$("#sensor6").css("color", "#F05C3C");
				}
			},
			'format': function (v) {return v + ' %';}
		});
	    $('#sensor6').trigger('change');
		$('#sensor7').trigger('configure', {
			'draw': function (v) {
				v=parseInt(document.getElementById('sensor7').value);
				if (v < 30 ) {
					this.o.fgColor='#F05C3C';
					$("#sensor7").css("color", "#F05C3C");
				}
			},
			'format': function (v) {return v + ' %';}
		});
	    $('#sensor7').trigger('change');
		$('#sensor8').trigger('configure', {
			'draw': function (v) {
				v=parseInt(document.getElementById('sensor8').value);
				if (v < 30 ) {
					this.o.fgColor='#F05C3C';
					$("#sensor8").css("color", "#F05C3C");
				}
			},
			'format': function (v) {
				return v + ' %';
			}
		});
	    $('#sensor8').trigger('change');
	  
	});

	/*
     $(".dial").knob({
                "min":0,
                "max" :100,
                "width":200,
				"heigth":200
            });


    function knobfunction(value1,id){
		
        $(id)
        .val(value1)
        .trigger('change');
		
        if(value1 < 30){
		    
		    $(id).trigger( 'configure', { "fgColor": "#F05C3C"} );	
			$(id).trigger( 'configure', { "inputColor": "#F05C3C"} );
        }else{
            $(id).trigger( 'configure', { "fgColor": "#009900"} );
            $(id).trigger( 'configure', { "inputColor": "#00ff00"} );
     
        }
	}
	

	
	
	$(document).ready(
		     function() {
                setInterval(function() {
					var id1 = document.getElementById('sensor1');

					knobfunction(id1.value,id1);
					
					var id2 = document.getElementById('sensor2');
					if(id2 != null) knobfunction(id2.value,id2);
					var id3 = document.getElementById('sensor3');
					if(id3 != null) knobfunction(id3.value,id3);
					var id4 = document.getElementById('sensor4');
					if(id4 != null) knobfunction(id4.value,id4);
					var id5 = document.getElementById('sensor5');
					if(id5 != null) knobfunction(id5.value,id5);
					var id6 = document.getElementById('sensor6');
					if(id6 != null) knobfunction(id6.value,id6);
					var id7 = document.getElementById('sensor7');
					if(id7 != null) knobfunction(id7.value,id7);
					var id8 = document.getElementById('sensor8');
					if(id8 != null) knobfunction(id8.value,id8);
					
                }, 3000);
    }); 
     */
</script>
<script type="text/javascript" >
	function actualizar(){location.reload(true);}
//Función para actualizar cada 4 segundos(4000 milisegundos)
  setInterval("actualizar()",20000);


</script>
</html>